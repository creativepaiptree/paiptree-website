begin;

insert into public.project_release_notes (
  project_id,
  version,
  released_on,
  items,
  meta,
  is_public
)
values
  ('poc', '1.8.0', '2026-02-12', '[{"titleKo":"뉴스 데이터 파이프라인을 Supabase 기반 API 구조로 전환","titleEn":"Migrated News Data Pipeline to Supabase-Backed API Flow","detailsKo":["`/about`의 `NewsSection` 데이터 소스를 Google Sheets 직접 조회에서 `paiptree_ds` 뉴스 API 호출로 전환","`src/lib/googleSheets.ts`에서 API 응답을 `NewsItem` 계약(`upload_date`, `download_count`, `original_url`)으로 정규화해 기존 UI를 유지","뉴스 조회 경로를 `https://paiptree-ds.vercel.app/api/news?tab=news&sortBy=date&sortOrder=desc` 기준으로 고정"],"detailsEn":["Switched `/about` `NewsSection` data source from direct Google Sheets access to the `paiptree_ds` news API.","Normalized API responses in `src/lib/googleSheets.ts` to the existing `NewsItem` contract (`upload_date`, `download_count`, `original_url`) to keep UI behavior unchanged.","Fixed the news fetch path to `https://paiptree-ds.vercel.app/api/news?tab=news&sortBy=date&sortOrder=desc`."]},{"titleKo":"교차 도메인 호출 안정화를 위한 News API CORS 대응","titleEn":"Added CORS Handling for Cross-Origin News API Requests","detailsKo":["`paiptree_ds`의 `/api/news` 라우트에 `Access-Control-Allow-*` 헤더를 추가해 웹사이트 직접 호출을 허용","브라우저 프리플라이트를 위해 `OPTIONS` 핸들러(204)와 허용 메서드(`GET,POST,OPTIONS`)를 반영","`Origin: http://localhost:3002` 조건에서 응답 헤더 포함 여부를 `curl -i`로 검증"],"detailsEn":["Added `Access-Control-Allow-*` headers to the `paiptree_ds` `/api/news` route to support direct website requests.","Implemented an `OPTIONS` (204) handler with allowed methods (`GET,POST,OPTIONS`) for browser preflight requests.","Verified header presence with `curl -i` under `Origin: http://localhost:3002`."]},{"titleKo":"운영 문서/환경설정 정리 및 회귀 검증 완료","titleEn":"Updated Operations Docs/Env Configuration and Completed Regression Checks","detailsKo":["Google Sheets 공개 키 의존을 제거하고 `NEXT_PUBLIC_PAIPTREE_NEWS_API_BASE_URL` 기반 구성으로 정리","`docs/pages/about.page.md`와 신규 진행 문서에서 전환 배경, 완료 범위, 점검 항목을 업데이트","`npm run lint` 및 `npm run build`를 재실행해 정적 export 빌드 회귀 여부를 확인"],"detailsEn":["Removed dependency on public Google Sheets API keys and standardized configuration around `NEXT_PUBLIC_PAIPTREE_NEWS_API_BASE_URL`.","Updated `docs/pages/about.page.md` and added a migration status document with scope, rationale, and checks.","Re-ran `npm run lint` and `npm run build` to confirm no regressions in static export builds."]}]'::jsonb, '{}'::jsonb, true),
  ('poc', '1.7.0', '2026-02-11', '[{"titleKo":"기획서 기준 3-Layer 추적 플로우 적용 범위 확장 (1~3차 완료)","titleEn":"Expanded 3-Layer Trace Flow Coverage per Plan (Phase 1-3 Complete)","detailsKo":["L1 적용 대상을 `Header`/`WeightDistribution`/`ForecastMatrix`/`RightSidebar`/`CCTVMonitor`까지 확장해 핵심 KPI가 동일한 추적 진입 패턴을 사용하도록 통일","L2는 우측 `TracePanel` 단일 진입점으로 표준화하고 탭 구조를 `Summary`/`Logic`/`Sources`/`History`(+CCTV trace 시 `CCTV`)로 고정","L3는 `Sources` 탭에서 목록-상세 분할 구조로 정리하고, 파일/DB/API 등 타입별 원본 메타데이터를 동일 포맷으로 검증 가능하게 통일","차트 포인트/툴팁(`ForecastMatrix`)에서도 trace 진입을 지원해 카드 값뿐 아니라 시계열 데이터도 동일한 추적 체인으로 연결","기획서의 No Orphaned Data 원칙에 맞춰 주요 운영 값이 값(L1)-로직(L2)-원본(L3)으로 역추적되도록 반영"],"detailsEn":["Expanded L1 trace coverage across `Header`, `WeightDistribution`, `ForecastMatrix`, `RightSidebar`, and `CCTVMonitor` with a consistent entry pattern.","Standardized L2 into a single right-side `TracePanel` with fixed tabs: `Summary`, `Logic`, `Sources`, `History`, plus `CCTV` for CCTV traces.","Normalized L3 into a list-detail structure in `Sources`, allowing consistent validation of file/DB/API metadata.","Enabled trace entry from chart points/tooltips (`ForecastMatrix`) so both KPI cards and time-series points share the same trace chain.","Implemented major operational values to satisfy the No Orphaned Data principle through L1-L2-L3 backtracking."]},{"titleKo":"데이터 계약/타입/샘플 데이터 동기화","titleEn":"Data Contract, Type, and Sample Data Synchronization","detailsKo":["`src/types/traceability.ts` 기준으로 `TraceabilityPayload`/`DataSourceReference`를 고정하고 화면 컴포넌트들이 공통 타입으로 trace 데이터를 주고받도록 정리","`src/contracts/dashboard-data.ts` 및 `src/contracts/dashboard-data.schema.json`에 `traceCatalog`/`traceabilityPayload` 계약을 반영해 API-UI 연결 기준을 명시","핵심 필드(`display_value`, `logic_summary`, `logic_formula`, `data_source[]`, `is_ai_generated`, `source_version`, `snapshot_at`, `confidence`)를 기준 필드로 확정","버전 비교를 위한 `version_history` 구조를 각 예측/지표 trace에 연결해 시점별 값/신뢰도/원본 diff 계산 기반을 확보","`src/data/dashboard-data.json`과 섹션별 샘플 trace를 업데이트해 UI 동작이 계약 필드와 불일치하지 않도록 동기화"],"detailsEn":["Fixed `TraceabilityPayload`/`DataSourceReference` in `src/types/traceability.ts` so components exchange trace data through one shared contract.","Reflected `traceCatalog`/`traceabilityPayload` in `src/contracts/dashboard-data.ts` and `src/contracts/dashboard-data.schema.json` for API-UI consistency.","Locked core fields (`display_value`, `logic_summary`, `logic_formula`, `data_source[]`, `is_ai_generated`, `source_version`, `snapshot_at`, `confidence`) as baseline requirements.","Connected `version_history` across forecast/KPI traces to enable snapshot-based value/confidence/source diff comparison.","Synchronized `src/data/dashboard-data.json` and section-level sample traces to prevent contract drift."]},{"titleKo":"운영 화면 가독성/검증 UX 개선 및 안정화","titleEn":"Operational Readability, Verification UX, and Stability Improvements","detailsKo":["값 인접의 인포 원형 아이콘과 `출처` 라벨을 제거하고, 버튼/hover 기반의 추적 진입 affordance는 유지해 화면 노이즈를 축소","CCTV 보관 분석 썸네일의 시간/상태 정보를 이미지 오버레이로 이동시켜 하단 텍스트 영역 의존도를 낮추고 모니터링 시선 이동을 단축","CCTV 상태 바(`스트림 상태/지연/마지막 heartbeat`) 정렬 및 예측 카드 정렬 규칙을 조정해 운영 화면 밀집도와 판독성을 개선","`TracePanel`의 `History` 탭에서 시점 2개를 선택해 값 변화/신뢰도 변화/요약 변경 여부/출처 추가·제거·공통 diff를 확인하도록 고도화","Weight Distribution 차트를 클라이언트 마운트 이후 렌더로 전환해 Recharts `width(-1)/height(-1)` 빌드 경고를 제거하고 초기 레이아웃 안정성 확보","배포 전 `lint`/`build` 검증 루프를 재실행해 기능 반영 및 회귀 여부를 확인"],"detailsEn":["Removed circular info icons and `source` labels near values while preserving button/hover-based trace-entry affordances.","Moved CCTV archived thumbnail time/status metadata to image overlays to reduce bottom-text dependency and shorten scan paths.","Retuned CCTV status bar (`stream`, `latency`, `heartbeat`) and forecast card alignment for denser operational readability.","Enhanced `History` in `TracePanel` to compare two snapshots with value/confidence deltas, summary change checks, and added/removed/shared source diff.","Switched Weight Distribution chart rendering to client-mount timing to remove Recharts `width(-1)/height(-1)` build warnings and improve initial stability.","Re-ran `lint`/`build` validation loops before deployment to confirm no regressions."]}]'::jsonb, '{}'::jsonb, true),
  ('poc', '1.6.0', '2026-02-11', '[{"titleKo":"문서 운영 구조 재정비 및 페이지 문서 기준선 확정","titleEn":"Documentation Structure Rework and Page Docs Baseline Finalization","detailsKo":["페이지 문서를 `docs/pages/*.page.md` 체계로 정리하고 주요 라우트(10개) 기준 문서를 통일","관리 허브 문서(`docs/admin/README.md`)를 중심으로 문서 인덱스/분류/운영 규칙을 재정렬","레거시 컴포넌트 문서는 `docs/old/`로 이관해 운영 문서와 아카이브 문서 영역을 분리"],"detailsEn":["Standardized page documentation under `docs/pages/*.page.md` and aligned baseline docs for 10 major routes.","Reorganized indexes, categories, and operating rules around the central hub document (`docs/admin/README.md`).","Moved legacy component docs to `docs/old/` to separate active operations docs from archived references."]},{"titleKo":"문서 자동화/검증 파이프라인과 개발 문서 접근성 강화","titleEn":"Documentation Automation/Validation Pipeline and Improved Doc Accessibility","detailsKo":["문서 동기화/검증/페이지 스캐폴딩 스크립트를 추가하고 `predev`/`prebuild` 단계에 자동 점검을 연결","PoC 상단 문서 모달에서 허브/인덱스/가이드/템플릿을 빠르게 확인하도록 시스템 문서 섹션을 확장","문서 `수정(Edit)` 버튼으로 로컬 원본 파일을 VS Code 등 외부 에디터에서 직접 열 수 있도록 개선"],"detailsEn":["Added doc sync/validation/page-scaffolding scripts and wired automatic checks into `predev`/`prebuild`.","Expanded the PoC top document modal with quick access to hub/index/guide/template system docs.","Added a document `Edit` action to open local source files directly in external editors such as VS Code."]},{"titleKo":"프론트엔드 미디어 최적화 및 API 키 보안 하드닝","titleEn":"Frontend Media Optimization and API Key Security Hardening","detailsKo":["`<img>` 사용 구간을 `next/image`로 정리해 주요 페이지/PoC의 이미지 로딩 정책을 일관화","Google Sheets 연동에서 하드코딩된 API 키 폴백을 제거하고 환경변수 미설정 시 안전하게 조회를 중단","배포 전 lint/build 검증 루프를 재실행해 회귀 없이 반영 상태를 확인"],"detailsEn":["Replaced remaining `<img>` usage with `next/image` to standardize image loading across key pages and PoC.","Removed the hardcoded API key fallback in Google Sheets integration and fail safely when env vars are missing.","Re-ran lint/build validation loop before deployment to confirm no regressions."]}]'::jsonb, '{}'::jsonb, true),
  ('poc', '1.5.0', '2026-02-09', '[{"titleKo":"CCTV 라이브/보관 화면 비율 및 폭 재조정","titleEn":"CCTV Live/Archive Ratio and Width Rebalancing","detailsKo":["CCTV 3영역 레이아웃을 좌 280px·중앙 820px·우측 flex(min 320px) 기준으로 정렬해 가로 넘침을 완화","중앙 라이브 프레임을 소스 비율(23:18) 유지 상태로 재배치하고 반응형 전환 지점을 정리","우측 보관 미리보기/썸네일 비율 규칙을 고정해 화면 크기 변화 시 정보 밀도가 균일하게 유지되도록 개선"],"detailsEn":["Rebalanced the three-pane CCTV layout to 280px left, 820px center, and flexible right panel (min 320px) to reduce horizontal overflow.","Repositioned the center live frame while preserving the source ratio (23:18) and clarified responsive breakpoints.","Fixed archive preview/thumbnail ratio rules so information density stays consistent across viewport sizes."]},{"titleKo":"샘플 미디어 매핑 및 페이지 기본 선택 규칙 통일","titleEn":"Unified Sample Media Mapping and Default Page Selection Rule","detailsKo":["라이브 샘플 소스를 `/media/cctv-sample-test1/cctv.mp4`로 고정하고 카메라 1/2/3에 동일 적용","보관 분석 이미지를 72장(`frame-001~frame-072`)으로 연결해 각 카메라가 동일 세트를 참조하도록 정리","페이지 이동 시 기본 선택 썸네일을 우상단(index 3)으로 통일해 탐색 시작점 일관성을 확보"],"detailsEn":["Set the live sample source to `/media/cctv-sample-test1/cctv.mp4` and applied it consistently to cameras 1/2/3.","Mapped archived analysis images to a 72-frame set (`frame-001~frame-072`) so each camera references the same dataset.","Standardized the default thumbnail selection to the top-right item (index 3) on each page for consistent navigation entry."]}]'::jsonb, '{}'::jsonb, true),
  ('poc', '1.4.0', '2026-02-08', '[{"titleKo":"CCTV 모니터링 레이아웃/운영 UX 전면 개편","titleEn":"Major CCTV Monitoring Layout & Operational UX Revamp","detailsKo":["좌(카메라 목록)·중(상시 라이브)·우(보관 분석) 3영역을 운영 흐름에 맞춰 재배치하고 가로폭을 재정렬","라이브 화면을 소스 비율(920x720, 23:18) 기준으로 유지하면서 패널 과대 여백을 제거해 실사용 중심으로 조정","카메라 목록을 미니 라이브 프리뷰 카드 구조로 개선해 LIVE/OFF, 지연, heartbeat를 한 번에 확인 가능하도록 통합"],"detailsEn":["Rebalanced the three-pane structure (left camera list, center always-on live, right archived analysis) to match real operational flow.","Kept live playback at source ratio (920x720, 23:18) while removing oversized empty panel space for practical monitoring use.","Upgraded the camera list into mini live preview cards that consolidate LIVE/OFF, latency, and heartbeat in one glance."]},{"titleKo":"보관 분석 이미지 탐색 흐름 정리","titleEn":"Archived Analysis Image Navigation Refinement","detailsKo":["페이지 이동 시 각 페이지 우상단 썸네일을 기본 선택으로 통일해 조회 시작점 일관성 확보","썸네일 하단 상태 표기를 `시간(좌) + 상태 배지(우)`로 단순화하고 `정상(녹색)/없음(빨강)` 기준으로 정리","중복/산만 요소(안내 박스, 하단 상세 블록, 중복 상태 아이콘)를 제거해 핵심 모니터링 정보만 남김"],"detailsEn":["Standardized default selection to the top-right thumbnail of each page for consistent navigation entry points.","Simplified thumbnail metadata to `time (left) + status badge (right)` with `OK (green) / None (red)` semantics.","Removed redundant or noisy elements (notice box, bottom detail block, duplicate status icons) to focus on core monitoring signals."]}]'::jsonb, '{}'::jsonb, true),
  ('poc', '1.3.1', '2026-02-08', '[{"titleKo":"체중분포(Weight Distribution) 조작/표현 개선","titleEn":"Weight Distribution Control & Presentation Improvements","detailsKo":["목표 체중 범위 입력/비교 토글/상세지표 토글 UI를 정리해 운영자가 빠르게 조건을 조정하도록 개선","차트 축/여백/보조 설명 배치를 재조정해 가독성과 데이터 판독 안정성을 강화","D-1 비교 지표 계산 로직을 보정해 목표 구간 변화량 해석이 일관되게 보이도록 정비"],"detailsEn":["Refined target-range inputs, comparison toggle, and detail metrics controls for faster operator adjustments.","Retuned chart axes, spacing, and helper annotations to improve readability and interpretation stability.","Adjusted D-1 comparison calculations to make target-zone delta interpretation more consistent."]},{"titleKo":"CCTV WEIGHT 예측/행렬 표시 로직 보강","titleEn":"CCTV Weight Forecast & Matrix Display Enhancements","detailsKo":["ROLLING FORECAST MATRIX 표시 밀도를 개선하고 카드/접힘 상호작용을 추가해 확인 동선을 단축","예측 카드 값/오차 표현을 명확히 분리해 오늘값과 예측값을 한 화면에서 빠르게 비교 가능","차트 축/그리드 스타일을 조정해 장시간 운영 모니터링 시 시각 피로를 완화"],"detailsEn":["Improved ROLLING FORECAST MATRIX density and added card/collapse interactions to shorten review flow.","Separated prediction value and error presentation for faster same-screen comparison of today vs forecast.","Adjusted axis/grid styling to reduce visual fatigue during long monitoring sessions."]}]'::jsonb, '{}'::jsonb, true),
  ('poc', '1.3.0', '2026-02-06', '[{"titleKo":"CCTV WEIGHT UI/호버/정확도 표시 로직 업데이트","titleEn":"CCTV WEIGHT UI/Hover/Accuracy Logic Update","detailsKo":["일령 기준 축(8~45일령)으로 통일하고 표준 체중(파란 선) 비교 시리즈를 추가","D-1/D-2/D-3 정확도 카드와 호버 계산식에 동일한 임계값 기준(녹/노/빨) 적용"],"detailsEn":["Unified age-based axis (8-45 days) and added standard-weight (blue line) comparison series.","Applied the same threshold rules (green/yellow/red) to D-1/D-2/D-3 cards and hover calculations."]},{"titleKo":"ROLLING FORECAST MATRIX 표시 로직 조정","titleEn":"ROLLING FORECAST MATRIX Display Logic Adjustment","detailsKo":["전치 구조(가로=일령, 세로=날짜) 기반으로 셀 의미를 정리해 해석 흐름 개선","주간 날짜 범위 계산을 실측일 기준으로 정렬해 불필요 선행 행 제거"],"detailsEn":["Refined transposed layout semantics (X=age, Y=date) for clearer cell interpretation.","Aligned weekly date-range calculation to measurement dates to remove unnecessary leading rows."]}]'::jsonb, '{}'::jsonb, true),
  ('poc', '1.2.0', '2026-01-26', '[{"titleKo":"예측중량 그래프를 CCTV/체중계 2개 라인으로 분리","titleEn":"Split Predicted Weight Chart into CCTV and Scale Lines","detailsKo":["막대그래프 호버 시 평균값 생성 일자와 현지시간 정보 표시","관찰 포인트별 비교를 쉽게 하도록 시각 구분 강화"],"detailsEn":["Added generated-date and local-time details in bar-hover average tooltip.","Improved visual separation to make point-by-point comparison easier."]},{"titleKo":"분석 이미지 메타데이터 위치/표현 조정","titleEn":"Adjusted Analysis Image Metadata Layout/Presentation","detailsKo":["좌상단 숫자 표현의 배경/폰트 컬러 체계를 정비","무게 표기를 R2 기준으로 통일하고 제목에 수집 진행 정보 반영"],"detailsEn":["Refined top-left number display with updated background/font color rules.","Standardized weight notation to R2 and reflected collection progress in the title."]}]'::jsonb, '{}'::jsonb, true),
  ('poc', '1.1.0', '2025-11-28', '[{"titleKo":"태국어 버전 추가","titleEn":"Added Thai Language Version","detailsKo":["대시보드 핵심 UI 문구의 다국어 리소스 확장","운영 화면 전환 시 언어 선택 동작을 안정화"],"detailsEn":["Extended multilingual resources for key dashboard UI labels.","Stabilized language-switch behavior across operational screens."]}]'::jsonb, '{}'::jsonb, true),
  ('poc', '1.0.1', '2025-11-10', '[{"titleKo":"WEIGHT 차트 일령 표시 추가","titleEn":"Added Age-Day Labels to WEIGHT Chart","detailsKo":["그래프 해석 기준을 날짜 중심에서 일령 중심으로 보조 표시","주요 포인트의 판독성을 높이기 위한 축 라벨 보정"],"detailsEn":["Added age-day reference labels alongside date-based reading context.","Adjusted axis labels to improve readability of key chart points."]},{"titleKo":"종료 파스 리셋/컬러/선택 버튼 UI 수정","titleEn":"Fixed End-pass Reset/Color/Selection Button UI","detailsKo":["종료 파스 리셋 화면 동작과 상태 반영 타이밍 정합성 개선","컬러 오류와 지난 파스 선택 버튼 동작 불일치 문제 보정"],"detailsEn":["Improved state-sync timing in end-pass reset flow.","Corrected color mismatches and previous-pass selection button behavior."]}]'::jsonb, '{}'::jsonb, true),
  ('poc', '1.0.0', '2025-09-22', '[{"titleKo":"PoC 화면 개발","titleEn":"Initial PoC Screen Development","detailsKo":["대시보드 기본 레이아웃과 핵심 컴포넌트 구조를 최초 구축","운영 검증을 위한 기본 데이터 시각화 흐름을 구현"],"detailsEn":["Built initial dashboard layout and core component structure.","Implemented baseline data-visualization flow for operational validation."]}]'::jsonb, '{}'::jsonb, true)
on conflict (project_id, version)
do update set
  released_on = excluded.released_on,
  items = excluded.items,
  meta = excluded.meta,
  is_public = excluded.is_public,
  updated_at = now();

commit;
